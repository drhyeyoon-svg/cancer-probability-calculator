# 데이터 업데이트 가이드

## 개요
국가 암 발생확률 계산기의 데이터를 업데이트하는 방법을 설명합니다. 
통계 자료는 4-5년 주기로 업데이트되므로, 이 가이드를 따라 데이터를 쉽게 교체할 수 있습니다.

## 파일 구조
```
프로젝트 폴더/
├── index.html              # 메인 웹페이지
├── styles.css              # 스타일시트
├── script.js               # 메인 JavaScript 로직
├── cancer-data.js          # 암 발생률 데이터 (업데이트 대상)
├── death-data.js           # 사망원인별 발생률 데이터 (업데이트 대상)
├── parse_excel_data_final.py  # 데이터 파싱 스크립트
└── DATA_UPDATE_GUIDE.md    # 이 파일
```

## 데이터 업데이트 절차

### 1단계: 새로운 엑셀 파일 준비
1. **KOSIS 국가통계포털** (https://kosis.kr)에서 최신 통계 자료 다운로드
2. 필요한 파일:
   - `24개_암종_성_연령_5세_별_암발생자수__발생률_[날짜].xlsx`
   - `사망원인생명표_5세별__[날짜].xlsx`

### 2단계: 엑셀 파일 배치
1. 다운로드한 엑셀 파일을 프로젝트 폴더에 복사
2. 파일명을 기존 파일명으로 변경:
   - `24개_암종_성_연령_5세_별_암발생자수__발생률_20250921204341.xlsx`
   - `사망원인생명표_5세별__20250921235108.xlsx`

### 3단계: 데이터 파싱 실행
```bash
# 프로젝트 폴더에서 실행
python parse_excel_data_final.py
```

### 4단계: 결과 확인
- `cancer-data.js` 파일이 업데이트됨
- `death-data.js` 파일이 업데이트됨
- 콘솔에서 파싱 결과 확인

### 5단계: 웹사이트 테스트
1. 웹사이트를 브라우저에서 열기
2. 개발자 도구 콘솔에서 데이터 로드 상태 확인
3. 다양한 나이와 성별로 검색 테스트

## 데이터 구조

### 암 발생률 데이터 (cancer-data.js)
```javascript
const cancerData = {
  "male": {
    "0-19": [
      { "name": "백혈병(C91-C95)", "rate": 4.8 },
      // ... 더 많은 암종
    ],
    "20-29": [
      // ... 20-29세 데이터
    ]
    // ... 다른 나이대
  },
  "female": {
    // ... 여성 데이터
  }
};
```

### 사망원인별 발생률 데이터 (death-data.js)
```javascript
const deathData = {
  "male": {
    "0-19": [
      { "name": "3대 사인", "rate": 43.79 },
      // ... 더 많은 사망원인
    ],
    "20-29": [
      // ... 20-29세 데이터
    ]
    // ... 다른 나이대
  },
  "female": {
    // ... 여성 데이터
  }
};
```

## 나이대 분류
- `0-19`: 0-4세, 5-9세, 10-14세, 15-19세
- `20-29`: 20-24세, 25-29세
- `30-39`: 30-34세, 35-39세
- `40-49`: 40-44세, 45-49세
- `50-59`: 50-54세, 55-59세
- `60-69`: 60-64세, 65-69세
- `70+`: 70-74세, 75-79세, 80-84세, 85세이상

## 문제 해결

### 파싱 오류가 발생하는 경우
1. 엑셀 파일의 구조가 변경되었을 수 있습니다
2. `analyze_excel.py` 스크립트를 실행하여 파일 구조 확인:
   ```bash
   python analyze_excel.py
   ```
3. 필요시 `parse_excel_data_final.py`의 파싱 로직 수정

### 데이터가 표시되지 않는 경우
1. 브라우저 개발자 도구 콘솔에서 오류 메시지 확인
2. JavaScript 파일들이 제대로 로드되었는지 확인
3. 데이터 검증 함수 실행 결과 확인

### 성능 최적화
- 대용량 데이터의 경우 웹사이트 로딩 속도가 느려질 수 있습니다
- 필요시 데이터를 압축하거나 불필요한 항목 제거 고려

## 주의사항
- 엑셀 파일의 컬럼명이나 구조가 변경되면 파싱 스크립트 수정이 필요할 수 있습니다
- 데이터 업데이트 후 반드시 웹사이트 테스트를 진행하세요
- 백업 파일을 만들어두는 것을 권장합니다

## 지원
데이터 업데이트 과정에서 문제가 발생하면 다음을 확인하세요:
1. Python 및 pandas 라이브러리 설치 상태
2. 엑셀 파일의 인코딩 및 형식
3. 파일 경로 및 권한 설정

---
*마지막 업데이트: 2025년 9월*
